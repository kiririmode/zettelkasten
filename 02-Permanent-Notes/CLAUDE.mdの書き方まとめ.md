# CLAUDE.mdの書き方・設計思想まとめ

## 定義・概要
CLAUDE.mdは、Claude Code（claude.ai/code）やAnthropic系AIエージェントにおける「プロジェクトの行動規範・知識・ワークフロー」を定義する最重要ファイルである。ユーザープロンプトよりも優先される「システムルール」として扱われ、プロジェクト全体の一貫性やAIの行動制御に決定的な影響を与える。

## CLAUDE.mdの優先順位と役割
- CLAUDE.mdの指示は「不変のシステムルール」として最優先される（ユーザープロンプトより上位）
- 指示内容はセッション全体で持続し、プロセス手順も逐次的に厳格に実行される
- ユーザープロンプトはCLAUDE.mdの範囲内でのみ柔軟に解釈される
- CLAUDE.mdの内容が多いほどAIの推論が安定し、タスク実行の一貫性が高まる

## 構造・設計のベストプラクティス
- 機能ごとにモジュール化し、Markdownの見出しで明確に区切る（指示の「にじみ」を防ぐ）
- できるだけ多くのワークフローや例、参照ファイルを前倒しで記載する
- ファイルのインポート（@パス記法）で外部ルールや個人設定も柔軟に統合可能
- トークン制限に注意しつつ、重要な文脈は前方に集約する
- チーム共通の規範はプロジェクト直下のCLAUDE.md、個人設定は~/.claude/CLAUDE.mdで分離

## CLAUDE.mdのインポート機能
- `@パス`記法で他のMarkdownや設定ファイルをインポート可能（相対・絶対パス両対応）
- インポートは最大5階層まで再帰的に有効
- コードブロックやインラインコード内ではインポート無効
- 個人ごとの追加指示やチーム標準を柔軟に合成できる

## メモリ管理と運用のポイント
- CLAUDE.mdは「プロジェクトメモリ」としてプロジェクト全体の知識・規範を保持
- ~/.claude/CLAUDE.mdは「ユーザーメモリ」として個人の好みやショートカットを記録
- CLAUDE.local.mdは非推奨。インポート機能で代替
- /memoryコマンドでメモリファイルを直接編集可能
- #記法で素早くメモリ追加し、どのファイルに保存するか選択できる

## 批判的視点・反論
- CLAUDE.mdが肥大化するとトークン制限で一部指示が無視されるリスクがある
- モジュール分割やインポートで「指示のにじみ」や「文脈汚染」を防ぐ必要がある
- CLAUDE.mdの内容が曖昧・冗長だとAIの挙動が不安定化するため、具体的かつ簡潔な記述が推奨される
- チーム運用時は個人設定と共通規範の分離・管理が重要

## 関連ノート・リンク
- [[CLAUDE.md]]（本リポジトリの運用ガイド）
- [[Claude_Code_使える環境と動作概要]]
- [[Claude_Code_メンタルモデル変革_定額使い放題時代の開発哲学]]
- [[Claude_Code_GitHub_Actions_技術とユースケース]]
- [[Claude_Code_ネットワーク要件まとめ]]
- https://claudelog.com/mechanics/claude-md-supremacy
- https://docs.anthropic.com/en/docs/claude-code/memory

#claude #claude.md #zettelkasten #memory #instruction
