# CLAUDE.mdの書き方・設計思想まとめ

## 定義・概要
CLAUDE.mdは、Claude Code（claude.ai/code）やAnthropic系AIエージェントにおける「プロジェクトの行動規範・知識・ワークフロー」を定義する最重要ファイルです。ユーザープロンプトよりも優先される「システムルール」として扱われ、プロジェクト全体の一貫性やAIの行動制御に決定的な影響を与えます。

## 役割と優先順位
- CLAUDE.mdの指示は「不変のシステムルール」として最優先され、ユーザープロンプトより上位に位置付けられます。
- 指示内容はセッション全体で持続し、プロセス手順も逐次的に厳格に実行されます。
- CLAUDE.mdの内容が明確かつ充実しているほど、AIの推論が安定し、タスク実行の一貫性が高まります。

## 記述・設計のベストプラクティス
- **明確なファイル選択**：必要なファイルや情報のみを厳選し、冗長な記述を避ける。
- **具体的なタスク定義**：抽象的な指示ではなく、実行可能な具体的手順や目的を明記する。
- **優先順位づけ**：重要な情報や指示を先頭に配置し、優先度の低い詳細や補足は後ろに回す。
- **簡潔な例示**：例やサンプルは最小限かつ代表的なものに絞り、冗長なケース網羅は避ける。
- 機能ごとにモジュール化し、Markdownの見出しで明確に区切る。
- ワークフローや参照ファイルは前倒しで記載し、重要な文脈は前方に集約する。
- チーム共通の規範はプロジェクト直下のCLAUDE.md、個人設定は~/.claude/CLAUDE.mdで分離する。

## インポート機能とメモリ管理
- `@パス`記法で他のMarkdownや設定ファイルをインポート可能（相対・絶対パス両対応、最大5階層まで再帰的に有効）。
- コードブロックやインラインコード内ではインポートは無効。
- CLAUDE.mdは「プロジェクトメモリ」として全体の知識・規範を保持し、~/.claude/CLAUDE.mdは「ユーザーメモリ」として個人の好みやショートカットを記録する。
- CLAUDE.local.mdは非推奨。インポート機能で代替。
- /memoryコマンドや#記法でメモリファイルを直接編集・追加できる。

## 批判的視点・反論
- CLAUDE.mdが肥大化するとトークン制限で一部指示が無視されるリスクがある。
- モジュール分割やインポートで「指示のにじみ」や「文脈汚染」を防ぐ必要がある。
- 曖昧・冗長な記述はAIの挙動を不安定化させるため、具体的かつ簡潔な記述が推奨される。
- チーム運用時は個人設定と共通規範の分離・管理が重要。

## 関連ノート・リンク
- [[CLAUDE.md]]（本リポジトリの運用ガイド）
- [[Claude_Code_使える環境と動作概要]]
- [[Claude_Code_メンタルモデル変革_定額使い放題時代の開発哲学]]
- [[Claude_Code_GitHub_Actions_技術とユースケース]]
- [[Claude_Code_ネットワーク要件まとめ]]
- https://claudelog.com/mechanics/claude-md-supremacy
- [Learn from the Constraint](https://claudelog.com/mechanics/context-window-constraints-as-training)
- https://docs.anthropic.com/en/docs/claude-code/memory

#claude #claude.md #zettelkasten #memory #instruction
