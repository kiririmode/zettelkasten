# MCPサーバのResource・Prompt・Toolとは何か

## 定義・概要
MCPサーバは、LLM（大規模言語モデル）と外部ツールやデータソースを標準化して接続するための仕組みです。主に「Resource」「Prompt」「Tool」という3つのコンポーネントで構成され、それぞれが異なる役割と制御階層を持ちます。

## 各コンポーネントの詳細

### Resource（リソース）
- LLMに追加コンテキストを与える構造化データや外部情報源。
- 例：ファイル内容、Git履歴、データベース情報など。
- URIでのみアクセス可能。呼び出し時に変数は渡せない。
- アプリケーション側が管理し、LLMは直接編集できない。

#### ユースケース
- コード補完時にプロジェクトのファイル内容を参照
- チャットボットが会話履歴やFAQデータベースを参照

#### 批判的視点
- 静的な情報提供に限定されるため、動的なパラメータ渡しや柔軟な操作には不向き
- セキュリティ設計が重要

### Prompt（プロンプト）
- LLMへの指示やテンプレート（命令文）。
- ユーザーが選択・編集でき、呼び出し時に変数を渡せる。
- スラッシュコマンドやメニュー形式で提供されることが多い。

#### ユースケース
- 「要約して」「コードレビューして」などの対話型コマンド
- 分析クエリやFAQ応答のテンプレート

#### 批判的視点
- ユーザーの意図を正確に反映する設計が求められる
- テンプレートの質や多様性がシステム全体の使い勝手を左右

## Promptの利用イメージと具体例

### 利用イメージ
Promptは、ユーザーが「どのMCPサーバ（例：Perplexity、Notion、Fetchなど）を、どのような目的・条件で使うか」を明示的に指示する命令文・テンプレートです。これにより、AIや外部サービスへの具体的なリクエストを柔軟かつ直感的に行うことができます。

### 具体例
- 「Perplexityを使って、昨日のプロ野球の結果を調べて」
  - ユーザーがPromptで「Perplexityを使う」と明示
  - MCPサーバがPerplexity APIに問い合わせ、結果を取得・整形して返す
- 「2024年のWebデザイントレンドを要約して」
  - Promptで「要約して」と指示し、Perplexityサーバを経由してWeb検索＋要約を自動実行
- 「Notionで会議メモをまとめて」「FetchでAPIから最新データを取得して」
  - Promptで利用したいMCPサーバやサービス名を明記し、複数サーバを組み合わせた業務自動化も可能

### 設計上のポイント
- サーバ名やサービス名をPrompt内で明示することで、意図したMCPサーバを経由できる
- 目的や条件（例：日付、要約、リスト形式など）を具体的に指示すると、より精度の高い応答が得られる
- 複数のMCPサーバ（Perplexity、Notion、Fetchなど）を組み合わせて、情報収集や業務自動化の幅を広げられる
- APIキーや接続設定は安全に管理し、環境変数や専用フォームで指定するのが一般的

### ユースケース
- 最新ニュースやイベント情報の検索・要約
- 社内ナレッジや外部データベースとの連携
- 複数サービスを横断した一括指示・自動化

---

### Tool（ツール）
- LLMが外部APIや関数を実行するためのインターフェース。
- 変数を渡して動的に操作でき、モデルが自律的に呼び出す。
- 例：APIリクエスト、ファイル書き込み、外部サービス連携

#### ユースケース
- GitHubのIssue作成、Slackチャンネル一覧取得
- データベースへのクエリ実行、外部API連携

#### 批判的視点
- LLMにツール実行権限を与えることで、誤操作やセキュリティリスクが生じる
- 標準化や拡張性の維持が難しい

## 相互関係・制御階層
| コンポーネント | 制御主体         | 変数渡し |
|----------------|------------------|----------|
| Resource       | アプリケーション | ×        |
| Prompt         | ユーザー         | ○        |
| Tool           | モデル           | ○        |

- Resourceは「文脈提供」、Promptは「対話設計」、Toolは「行動実行」を担い、三者が連携してLLMの能力を最大化します。

## Perplexity等LLMエージェントとの関連
- PerplexityやAnthropic ClaudeなどのLLMエージェントは、MCPサーバのToolやResourceを活用することで、単なるテキスト生成を超えた「実行力」や「外部知識参照力」を獲得します。
- 例：PerplexityがTool経由でWeb検索やAPI呼び出しを行い、より実用的な回答を生成

## 批判的視点・課題まとめ
- セキュリティ（誤操作・権限管理）
- 標準化の難しさ（多様なLLM・データソース対応）
- 実装・運用コスト（複雑性、パフォーマンス）

## 関連ノート・リンク案
- [[MCPサーバの設計思想とセキュリティ課題]]
- [[LLMエージェントのユースケース]]
- [[外部API連携とAIの実用化]]

## タグ
#mcp #llm #resource #prompt #tool #エージェント #ai設計
